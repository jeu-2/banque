<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banque J.E.U. - Interface Client</title>
    
    <link href="/banque/css/style.css" rel="stylesheet"/>
<script src="/banque/js/main.js"></script>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>‚ö° BANQUE J.E.U. ‚ö°</h1>
        <p>JARDIN D'√âCHANGE UNIVERSEL - MONNAIE COMMUNAUTAIRE</p>
    </div>

    <!-- Dashboard Grid -->
    <div class="dashboard">
        <!-- Tableau de Bord Membre -->
        <div class="module-card fade-in-up">
            <div class="module-header">
                <span class="module-icon">üë§</span>
                <h2 class="module-title">Tableau de Bord Membre</h2>
            </div>
            <div class="balance-display">
                <div class="user-name">Jean-Fran√ßois Tremblay</div>
                <div class="user-status">Membre Fondateur</div>
                <div class="balance-amount">2,450</div>
                <div class="balance-label">Points J.E.U. disponibles</div>
                <div class="member-code">Membre : JEU0000001</div>
            </div>
            <div class="stats-grid">
                <div class="stat-box">
                    <span class="stat-number">47</span>
                    <span class="stat-label">√âchanges totaux</span>
                </div>
                <div class="stat-box">
                    <span class="stat-number">12</span>
                    <span class="stat-label">Partenaires actifs</span>
                </div>
                <div class="stat-box">
                    <span class="stat-number">98%</span>
                    <span class="stat-label">Score fiabilit√©</span>
                </div>
                <div class="stat-box">
                    <span class="stat-number">5‚≠ê</span>
                    <span class="stat-label">√âvaluation</span>
                </div>
            </div>
        </div>

        <!-- Nouvelle Offre -->
        <div class="module-card fade-in-up">
            <div class="module-header">
                <span class="module-icon">üì¢</span>
                <h2 class="module-title">Nouvelle Offre</h2>
            </div>
            <form id="offerForm">
                <div class="form-group">
                    <!-- Titre -->
                    <label class="form-label">Titre de l'Offre</label>
                    <input type="text" class="form-input"  id="offreTitre" placeholder="Ex: Cours de cuisine italienne" required>
                </div>
                
                <div class="form-group">
                    <!-- Type -->
                    <label class="form-label">Type de l'Offre</label>
                    <select class="form-select"  id="offreType" required>
                        <option value="">S√©lectionner un type...</option>
                        <option value="speciale">Sp√©ciale</option>
                        <option value="saisonniere">Saisonni√®re</option>
                        <option value="ponctuelle">Ponctuelle</option>
                        <option value="continue">Continue</option>
                        <option value="liquidation">Liquidation</option>
                    </select>
                </div>
                <div class="form-group">

                        <!-- Cat√©gorie -->                
                    <label class="form-label">Cat√©gorie</label>
                    <select class="form-select" id="offreCategorie" required>
                        <option value="">S√©lectionner une cat√©gorie...</option>
                        <option value="hebergement">H√©bergement</option>
                        <option value="evenement">√âv√©nement</option>
                        <option value="produit">Produit</option>
                        <option value="service">Service</option>
                        <option value="don">Don</option>
                        <option value="bonus">Bonus</option>
                        <option value="correctif">Correctif</option>
                    </select>
                            
                </div>
                <div class="form-group">
                    <!-- Montant -->
                    <label class="form-label">Montant (Points J.E.U.)</label>
                    <input type="number" class="form-input" id="offrePrixPoints" placeholder="Ex: 80" required>
                     
                </div>
                <div class="form-group">
                    <!-- Description -->
                    <label class="form-label">Description</label>
                    <textarea class="form-textarea"  id="offreDescription" placeholder="D√©crivez votre offre en d√©tail..." required></textarea>
                </div>
                <button type="submit" class="btn-primary">Publier l'Offre</button>
            </form>
        </div>

        <!-- Nouvelle Transaction -->
        <div class="module-card fade-in-up">
            <div class="module-header">
                <span class="module-icon">üíé</span>
                <h2 class="module-title">Nouvelle Transaction</h2>
            </div>
            <form id="transactionForm">
                <div class="form-group">
                    <label class="form-label">Type d'√©change</label>
                    <select class="form-select" required>
                        <option value="">S√©lectionner un type...</option>
                        <option value="service">Service</option>
                        <option value="produit">Produit</option>
                        <option value="formation">Formation</option>
                        <option value="transport">Transport</option>
                        <option value="autre">Autre</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">R√©f√©rence de l'Offre</label>
                    <input type="text" class="form-input" placeholder="Ex: OFF-2025-rec0ptPxgXb1KsTfX" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Code du partenaire</label>
                    <input type="text" class="form-input" placeholder="JEU0000001" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Montant (Points J.E.U.)</label>
                    <input type="number" class="form-input" placeholder="Ex: 50" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description d√©taill√©e</label>
                    <textarea class="form-textarea" placeholder="D√©crivez pr√©cis√©ment l'√©change..." required></textarea>
                </div>
                <button type="submit" class="btn-primary">Enregistrer Transaction</button>
            </form>
        </div>

        <!-- Place du March√© -->
        <div class="module-card fade-in-up">
            <div class="module-header">
                <span class="module-icon">üèÜ</span>
                <h2 class="module-title">Place du March√©</h2>
            </div>
            
            <!-- Section de Recherche -->
            <div class="search-section">
                <input type="text" class="search-input" placeholder="üîç Rechercher une offre, un service, un produit..." id="searchInput">
                <div class="search-filters">
                    <button class="filter-btn active" data-category="services">Services</button>
                    <button class="filter-btn" data-category="produits">Produits</button>
                    <button class="filter-btn" data-category="evenements">√âv√©nements</button>
                </div>
            </div>

            <!-- Offres affich√©es -->
            <div id="offersContainer">
                <div class="marketplace-item" data-category="services">
                    <div class="marketplace-header">
                        <div class="marketplace-title">Cours de yoga priv√©</div>
                        <div class="marketplace-price">80 pts</div>
                    </div>
                    <div class="marketplace-provider">Par Sylvie Martineau</div>
                    <div class="marketplace-description">Disponible ce weekend</div>
                </div>
                <div class="marketplace-item" data-category="services">
                    <div class="marketplace-header">
                        <div class="marketplace-title">R√©paration v√©lo expert</div>
                        <div class="marketplace-price">60 pts</div>
                    </div>
                    <div class="marketplace-provider">Par Pierre Gagnon - Service garantie</div>
                    <div class="marketplace-description">R√©paration compl√®te avec garantie 6 mois</div>
                </div>
            </div>
        </div>

        <!-- Historique des Transactions -->
        <div class="module-card fade-in-up">
            <div class="module-header">
                <span class="module-icon">üìä</span>
                <h2 class="module-title">Historique des Transactions</h2>
            </div>
            <div class="transaction-item">
                <div class="transaction-info">
                    <h4>Coiffure avec Marie Lavall√©e</h4>
                    <div class="transaction-date">21 mai 2025 - 14:30</div>
                </div>
                <div class="transaction-amount negative">-150 pts</div>
            </div>
            <div class="transaction-item">
                <div class="transaction-info">
                    <h4>L√©gumes bio du jardin</h4>
                    <div class="transaction-date">20 mai 2025 - 09:15</div>
                </div>
                <div class="transaction-amount positive">+75 pts</div>
            </div>
            <div class="transaction-item">
                <div class="transaction-info">
                    <h4>Garde d'enfants (3h)</h4>
                    <div class="transaction-date">19 mai 2025 - 18:00</div>
                </div>
                <div class="transaction-amount positive">+200 pts</div>
            </div>
            <div class="transaction-item">
                <div class="transaction-info">
                    <h4>Massage th√©rapeutique</h4>
                    <div class="transaction-date">18 mai 2025 - 16:45</div>
                </div>
                <div class="transaction-amount negative">-125 pts</div>
            </div>
            <section id="offres">
            <h2>Offres disponibles</h2>
            <ul id="liste-offres"></ul>
            </section>
        </div>

        <!-- Messagerie Communautaire -->
        <div class="module-card fade-in-up">
            <div class="module-header">
                <span class="module-icon">üí¨</span>
                <h2 class="module-title">Messagerie Communautaire</h2>
            </div>
            <div class="message-item">
                <div class="message-header">
                    <div class="message-sender">Pierre L.</div>
                    <div class="message-time">Il y a 2h</div>
                </div>
                <div class="message-content">Salut ! J'ai des l√©gumes frais √† √©changer contre des services de jardinage.</div>
            </div>
            <div class="message-item">
                <div class="message-header">
                    <div class="message-sender">Sylvie M.</div>
                    <div class="message-time">Hier</div>
                </div>
                <div class="message-content">Merci pour le massage ! Transaction parfaite comme toujours üòä</div>
            </div>
            <div class="message-compose">
                <textarea class="form-textarea" placeholder="√âcrire un message √† la communaut√©..." rows="3"></textarea>
                <button class="btn-primary" style="margin-top: 1rem;">Envoyer Message</button>
            </div>
        </div>
    </div>
   <div class="spacer"></div>
    </div> <!-- Fin du .dashboard -->
    <!-- Pied de page ajout√© -->
<footer class="footer custom-footer">
  <div class="footer-content">
    <div class="footer-logo">BANQUE J.E.U.</div>
    <div class="footer-links">
      <a href="#accueil">Accueil</a>
      <a href="#fonctionnement">Comment √ßa marche</a>
      <a href="#avantages">Avantages</a>
      <a href="#contact">Contact</a>
      <a href="#">Conditions</a>
      <a href="#">Confidentialit√©</a>
    </div>
    <div class="footer-bottom">
      <p>¬© 2025 Banque J.E.U. - Jardin d'√âchange Universel. Tous droits r√©serv√©s.</p>
      <p>Une initiative du Consortium BICFIL-MULTI-PAAS-POEZIES sous l'autorit√© de L√©na May√´l</p>
    </div>
  </div>
</footer>
    <script>
        // Animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in-up');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.module-card').forEach(el => {
            observer.observe(el);
        });

        // Form submissions
        document.getElementById('transactionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            handleFormSubmission(e, 'Transaction Enregistr√©e !');
        });

        document.getElementById('offerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            handleFormSubmission(e, 'Offre Publi√©e !');
        });

        function handleFormSubmission(e, successMessage) {
            const button = e.target.querySelector('button[type="submit"]');
            const originalText = button.textContent;
            button.textContent = 'Traitement en cours...';
            button.style.background = 'linear-gradient(45deg, #ffed4a, #ffd700)';
            
            setTimeout(() => {
                button.textContent = '‚úÖ ' + successMessage;
                setTimeout(() => {
                    button.textContent = originalText;
                }, 3000);
            }, 1500);
        }
    </script>
    <script>
  async function chargerOffres() {
    const liste = document.getElementById("liste-offres");
    try {
      const response = await fetch("https://banque-api-jeu.onrender.com/api/offres");
      const data = await response.json();

      data.records.forEach((record) => {
        const offre = record.fields;
        const li = document.createElement("li");
        li.innerHTML = `
          <h3>${offre["Titre"] || "Sans titre"}</h3>
          <p><strong>Cat√©gorie :</strong> ${offre["Cat√©gorie"] || "-"}</p>
          <p><strong>Description :</strong> ${offre["Description"] || "-"}</p>
          <p><strong>Prix :</strong> ${offre["Prix en points"] || "?"} points</p>
          <p><strong>Lieu :</strong> ${offre["Lieu"] || "-"}</p>
          ${
            offre.Images?.[0]?.thumbnails?.small?.url
              ? `<img src="${offre.Images[0].thumbnails.small.url}" alt="Image" style="max-width:150px;">`
              : ""
          }
          <hr>
        `;
        liste.appendChild(li);
      });
    } catch (err) {
      console.error("Erreur chargement offres :", err);
      liste.innerHTML = "<p>Impossible de charger les offres.</p>";
    }
  }

  document.addEventListener("DOMContentLoaded", chargerOffres);
</script>
</body>
</html>
